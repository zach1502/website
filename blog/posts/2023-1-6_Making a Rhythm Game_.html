<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Zachary Chan | Blog</title>
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EJ4J9G467E"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-EJ4J9G467E');
        </script>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="A resume site that builds itself in front of you">
        <meta name="keywords" content="resume, co-op, build, site, zach, blog, self">
        <meta name="author" content="Zachary Chan">
        <link rel="icon" type="image/x-icon" href="../../icon.ico">
        <link rel="stylesheet" href="../assets/style.css">
    </head>

    <body>
        <!-- top bit -->
        <div>
            <nav>
                <a href="../index.html" id="main"> Main Page</a>
                <a href="../main_blog.html"> Blog</a>
                <a href="./resume.docx" download> Download My Resume</a>
                <a href="https://github.com/zach1502/website"> Source Code</a>
                <a href="https://github.com/zach1502/"> GitHub</a>
            </nav>
        </div>

        <!-- main content -->
        <!-- centered -->
        <div class="main-content">
            <h1> 
                Making a Rhythm Game
            </h1>
            <hr>
            <span>Posted on January 6th, 2023</span>
            <hr>
            <p>
                Well, Well, Well. Another project done.
            </p>
            <p>
                This time, I made a rhythm game. I'm quite proud of it, and I think it's a good example of what pure vanilla JavaScript can do.
                The game can be easily expanded to include more songs, features, and more.
                There are still things I want to add to it, but for now, 4 days before the start of my co-op, it's in a good enough state to be left alone.
            </p>
            <h2>
                Planning
            </h2>
            <p>
                The battle plan was this, a simply 4-key rhythm game. I wanted to make it as simple as possible so that I could focus on the core mechanics of the game.
                The gimmic of the game is that there are no hold notes. Hold notes are a staple in rhythm games allowing a bit more depth in mechanics.
                My line of thinking about removing hold notes was that it would make the game more accessible to people who are not used to rhythm games.
                Another goal of this was that this will allow me to add more depth and mechanics to the single type of notes. They do say, "Constraints birth creativity".
            </p>
            <h2>
                The Prototype
            </h2>
            <p>
                I wanted to make some sort of a game for a while now, and I thought that a rhythm game would be a good place to start. You don't usually see people making those in javascript do you?
                The first step is creating a rough sketch of the game. Some sort of prototype to see if I wanted to continue with it.
                I created a skeleton HTML page that only contained some title text, a button to start and the keys where the notes would be timed to.
                My CSS file was also very simple, just some basic styling for the keys and consistant style with the rest of my website. I abused CSS animations in order to move the notes down the screen.
                The JavaScript file simply had a function that would create a note and I attached event listeners to the keys to see if they were pressed at the right time.
            </p>
            <p>
                I used bounding boxes to check if the notes were pressed at the right time. I also used a simple array to store the notes that were on the screen.
                The notes would be removed from the array when they were pressed within the hit zone,
                if they are below the hit zone, they are removed automatically after a certain amount of time with a clean-up function that runs every 250ms.
                That was the basic prototype, and it worked well enough for me to continue with it.
            </p>
            <h2>
                Mapping and Music Syncronization
            </h2>
            <p>
                Mapping is the process of creating the sequence of notes that will be spawned in the game at so and so time.
                I essentially created a file format to read in human readable text and convert it into a sequence of notes.
            </p>
            <p>
                For example: note 2400 d. This would create a note that would spawn at 2400ms and would be in the position of the D key.
            </p>
            <p>
                I used a little HTML trick that lets me read in a file without using a server.
                Using a hidden iframe and setting the src attribute to the file, I can read the contents of the file and parse it!
                The only downside is that this will not scale very well, but for a small project like this, it's fine.
                Imagine if at some point in time I create 50000 maps, then all 50000 will have to be fetched at once and that will severely impact loading times!
            </p>
            <p>
                Parsing the file was pretty simple, I just split the file into lines and then split each line into tokens.
                depending on the first token, it will execute different instructions but at this point in time, I left it as a switch statement with a singular case to handle notes.
                This parse the instructions as they are read and get pushed into an array of instructions.
                When the play button is pressed, the game will start reading the instructions and spawning notes.
            </p>
            <p>
                Getting music to play in sync with the notes was a bit of a challenge. 
                What I decided on doing was using an initial delay of 1 second to allow for notes to spawn and fall before the music starts.
                And that worked well enough, I will have to probably make that initial delay flexible in the future to allow for different songs.
            </p>
            <p>
                To be honest, the mapping proccess took the longest amount of time for this project. I was typing in the notes by hand and it was very tedious.
                As a future project Idea, I could create a mapping tool that would allow me to create the notes by clicking on the keys or something simlar to what many rhythm games already have.
                Each note was painstakingly typed in by hand, and I'm not sure if I want to do that again.
            </p>
            <h2>
                Improving UX/UI
            </h2>
            <p>
                I'm not a designer, so I'm not going to go into too much detail about the design of the visual elements of the game.
                The basic philosophy I had was to create a simple and clean design that would not distract the player.
                The final design is solid and simple. It does the job and it doesn't look bad.
            </p>
            <p></p>
                On the UX side of things, I wanted to game to be really reactive and responsive to the player's actions.
                For example, when the player presses a key, the key should react somehow.
                When the player presses the key at the right time, a hit-sound will play and that will help the player time their key presses.
            </p>
            <p>
                I did everything in my power to make the game as responsive as possible.
                If you touched something interactable, then it should react to your touch.
                Small things like the key popping out when you pressed it and rewarding sounds when you hit a note.
                I believe help drive the player to play the game and to continue doing so.
            </p>
            <p>
                I was extra careful in the UX part of the game because I wanted to make sure that the game was as fun as possible with low barrier to entry because I'm expecting not many people that visit my site to have god-level rhythm.
                So stuff like ghost tapping (the ability to tap the keys and not get penalized for it if there is no notes), generous hit timings, autoplay if you want to watch a computer beat the map and etc. have been implemented to help the player.
                The entire site is targeted towards recruiters afterall. I don't expect to see "DDR Master" on their resumes!
            </p>
            <h2>
                Improvements and Future Plans
            </h2>
            <p>
                I can't just talk about the game without talking about the things I want to improve on!
                I have a list of things I want to add to the game, and I will probably add them in the future.
                Stuff like personal high scores, and the earlier mentioned mapping tool are all things I want to add.
                I also want to add more songs to the game, I think its fine if I pick out copyrighted songs and just make a map for them. 
                I don't think that's illegal because of fair use or fair dealing depending on where you're situated. 
                I definitely think that I need to improve on the UI and UX of the game, I think I can make it look a lot better but I don't have the skills to do so.
                I also want to add "fake" notes, these will be notes that will penalize your score if you hit them.
            </p>
            <h2>
                Final Thoughts
            </h2>
            <p>
                I'm really happy with how the game turned out. I think it's a fun little game that I can show off to recruiters.
                I was able to learn a lot about game development and I'm really happy with the result.
                It is a bit esoteric, but I think it's a good project to show off my skills.
            </p>
            <p>
                Thanks for reading this far! I hope you enjoyed reading this as much as I enjoyed writing it!
            </p>
        </div>

        <!-- bottom bit -->
        <div>
            <footer>
                &copy; 2022 Zachary Chan
            </footer>
        </div>
    </body>
</html>